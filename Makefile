CXX = ./mila
CXXFLAGS = -o ye
FILE = ye.mila
OUT = ye
BUILD = ./build/mila
DEPENDANCIES = main.cpp Lexer.hpp Lexer.cpp Parser.cpp Parser.hpp ast.hpp ast.cpp
TEST1 = tests/constants.mila
TEST2 = tests/expressions2.mila
TEST3 = tests/expressions.mila
TEST4 = tests/factorial.mila
TEST5 = tests/fibonacci.mila
TEST6 = tests/forif.mila
TEST7 = tests/forloop.mila
TEST8 = tests/func2.mila
TEST9 = tests/func3.mila
TEST10 = tests/func4.mila
TEST11 = tests/func.mila
TEST12 = tests/ifelse.mila
TEST13 = tests/lesseq.mila
TEST14 = tests/localvar.mila
TEST15 = tests/nestedfor.mila
TEST16 = tests/procedure.mila
TEST17 = tests/readln.mila
TEST18 = tests/writeln.mila

compile : $(BUILD)

run : $(BUILD)
			./mila -o ye ye.mila
			./ye

test1: $(BUILD)
			@echo "========================================"
			@echo "            TESTING CONSTANTS           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST1)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST1)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test2 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING EXPRESSIONS         "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST2)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST2)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test3 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING EXPRESSIONS         "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST3)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST3)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test4 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING FACTORIAL           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST4)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST4)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test5 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING FIBONACCI           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST5)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST5)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test6 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING FOR / IF            "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST6)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST6)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test7 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING FOR LOOP            "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST7)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST7)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test8 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING FUNCTIONS           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST8)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST8)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test9 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING FUNCTIONS           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST9)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST9)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test10 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING FUNCTIONS           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST10)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST10)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test11 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING FUNCTIONS           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST11)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST11)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test12 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING IF / ELSE           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST12)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST12)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test13 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING LESS / EQ           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST13)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST13)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test14 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING LOCAL VAR           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST14)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST14)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test15 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING NESTED FOR          "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST15)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST15)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test16 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING PROCEDURES          "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST16)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST16)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test17 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING READ LINE           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST17)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST17)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

test18 :$(BUILD)
			@echo "========================================"
			@echo "            TESTING WRITE LINE           "
			@echo "========================================"
			@echo "              PROGRAM CODE							 "
			@echo "========================================"
			@cat $(TEST18)
			@sleep 3
			@echo "========================================"
			@echo "            INTERMEDIATE CODE					 "
			@echo "========================================"
			@./mila -o ye $(TEST18)
			@echo "========================================"
			@echo "                 OUTPUT								 "
			@echo "========================================"
			@./ye
			@echo "========================================"

clean :
				cd build && make clean && cd ..
				rm ye ye.o ye.ir ye.s

$(BUILD) : $(DEPENDANCIES)
				 cd build && make && cd ..
